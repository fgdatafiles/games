import*as THREE from"./../vendor/Threejs/r105/build/three.module.js";import{EffectComposer}from"./../vendor/Threejs/r105/src/jsm/postprocessing/EffectComposer.js";import{RenderPass}from"./../vendor/Threejs/r105/src/jsm/postprocessing/RenderPass.js";import{cameraController}from"./camera-min.js";import{HomeSlider}from"./homeSlider-min.js";import{lightController}from"./light-min.js";import{Index}from"./index-min.js";import{mousemoveController}from"./mousemove-min.js";export const Renderer=function(){let e,r,t,o,n=0,i=0,a=.002,s=0,m=0,l=0,c=0,d=1.5,f=0,p=0;function g(e){const t=(e*=.001)-n;n=e,r.render(t),TWEEN.update();let v=HomeSlider.getCurrentPlane();if(v)for(var C=v.geometry,h=0;h<C.vertices.length;h++){var j=+C.vertices[h].z;C.vertices[h].z=u(j,Math.sin(h+i*a)*(C.vertices[h]._myZ-C.vertices[h]._myZ*Math.tan(C.vertices[h].z)),.003),C.verticesNeedUpdate=!0,i+=.1}var T=Index.getCamera();const x=cameraController.getCameraVectors();let y=x.lookatCenter;var w=x.lookatCenter.x,E=x.lookatCenter.y,R=x.lookatCenter.z,k=x.lookatTargetY,z=x.lookatTargetX,I=x.lookatTargetZ,P=x.cameraSwingY,S=x.cameraSwingX,H=x.cameraTargetX,X=(x.cameraTargetY,x.cameraTargetZ);T.position.x=u(T.position.x,H+S,.01),T.position.z=u(T.position.z,X,.01),T.position.y=u(T.position.y,k+P,.01);var b=u(E,k,.05);y.y=b;var Y=u(w,z,.05);y.x=Y;var Z=u(R,I,.05);y.z=Z,s=u(s,l+p,.01),m=u(m,c+f,.01),o.position.x=Y-d+s,o.position.y=b-.5+m,T.lookAt(y),requestAnimationFrame(g)}function u(e,r,t){return(1-t)*e+t*r}return{build:function(n,i,a,s){o=lightController.getLight(),t=s,(e=new THREE.WebGLRenderer({alpha:!0,antialias:!1})).setSize(window.innerWidth,window.innerHeight),e.setPixelRatio(window.devicePixelRatio),e.autoClear=!1,document.querySelector("#mid").appendChild(e.domElement),(r=new EffectComposer(e)).addPass(new RenderPass(n,i)),0==Index.getIsMobile()?(l=.75,c=.75):(l=1.75,c=.75),g()},getRenderer:function(){return e},setfireflyTargetX:function(e){d=e;let r=0,t=setInterval(function(){d=u(d,e,.01),500==++r&&clearInterval(t)},1)},setfireflyInteractionX:function(e){p=e},setfireflyInteractionY:function(e){f=e}}}();