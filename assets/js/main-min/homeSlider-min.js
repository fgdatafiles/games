import{Index}from"./index-min.js";import{ButtonizeController}from"./buttonize-min.js";import{cameraController}from"./camera-min.js";import{devicemotionController}from"./devicemotion-min.js";import{mousemoveController}from"./mousemove-min.js";import{lightController}from"./light-min.js";import{Renderer}from"./render-min.js";export const HomeSlider=function(){document.querySelectorAll(".homeSlide");let e,t,o=null;const n=document.querySelector("#mouseIndicator"),l=document.querySelector("#logo"),i=l.clientWidth;let r=0;const a=document.querySelector("#mousePoint"),c=(document.querySelector("#infoButton"),document.querySelector("#container"),document.querySelectorAll(".visitButton"),document.querySelector("#sliderNav")),m=document.querySelector("#homeSlideEndSeperatorDesktop"),s=document.querySelector("#homeSlideEndSeperatorMobile");let h,d,u,b,O=1,y=0,S=0;function j(e,t){TweenMax.killTweensOf(e),TweenMax.killTweensOf(t),TweenMax.to(t,0,{y:0,x:0,scale:.8,rotationY:-0,rotationX:-2,opacity:0,transformOrigin:"center",transformPerspective:"50",force3D:!0}),TweenMax.to(t,1.5,{y:0,x:0,scale:1,rotationY:0,rotationX:0,opacity:1,delay:1})}function w(e,t){TweenMax.killTweensOf(e),TweenMax.killTweensOf(t),TweenMax.to(t,.5,{y:0,x:0,scale:.9,rotationY:0,rotationX:0,opacity:0,onComplete:function(){e.classList.add("displayNone")}})}function T(t){const o=e[t].position.y;let n=cameraController.getCameraVectors();n.cameraTargetY=o,n.lookatTargetY=o,1==Index.getIsMobile()?(n.lookatTargetX=0,S=0):(n.lookatTargetX=1,S=1),cameraController.setCameraVectors(n)}function p(){return(Index.getWW()-i-0)/2}function f(){return 0===Index.getIsMobile()?(Index.getHH()-0)/2-150:(Index.getHH()-0)/2-200}function g(e){var t=e.geometry,o=setInterval(function(){for(var e=0;e<t.vertices.length;e++){var o=+t.vertices[e].z;t.vertices[e].z=(1-(n=.4))*o+n*0,t.verticesNeedUpdate=!0}var n},100);setTimeout(function(){clearInterval(o)},1e3)}return{build:function(){e=Index.getPlanes(),t=[{name:"start",cameraTargetPosition:null,cameraPosition:null,htmlObject:document.querySelector("#homeSlide1"),htmlObjectInner:document.querySelector("#homeSlide1 .homeSlideInner"),webglObject:e[0],show:function(){document.querySelector("#homeSlide1").classList.remove("displayNone");let e=cameraController.getCameraVectors();e.cameraTargetY=0,e.cameraTargetX=0,e.lookatTargetY=1.25,e.lookatTargetX=0,S=0,cameraController.setCameraVectors(e),n.classList.remove("displayNone"),TweenMax.to(n,5,{opacity:1,delay:4}),O?(TweenMax.to(container,1,{opacity:1,delay:2}),TweenMax.to(l,0,{left:p(),top:f()+30,force3D:!0,rotationZ:1e-4}),TweenMax.to(l,1.5,{opacity:1,ease:Circ.easeOut,top:f()}),O=0):(TweenMax.to(container,1,{opacity:1,delay:0}),0===Index.getIsMobile()?TweenMax.to(l,2.5,{left:p(),top:f(),ease:Circ.easeInOut}):((d=new TimelineMax({repeatDelay:0})).to(l,1,{opacity:0}),d.to(l,0,{left:p(),top:f()}),d.to(l,1,{opacity:1})),O=0),y=0,(h=new TimelineMax({repeat:-1,repeatDelay:0})).to(a,0,{y:20,opacity:0}),h.to(a,.5,{y:0,opacity:1}),h.to(a,.5,{y:-20,opacity:0}),TweenMax.to(this.htmlObjectInner,0,{y:50,x:0,scale:.8,rotationY:-3,rotationX:-3,opacity:0,transformOrigin:"center",transformPerspective:"50",force3D:!0}),TweenMax.to(this.htmlObjectInner,2.5,{y:0,x:0,scale:1,rotationY:0,rotationX:0,opacity:1,delay:1}),ButtonizeController.infoButtonHide(),setTimeout(()=>{TweenMax.killTweensOf(c),TweenMax.to(c,1,{opacity:0,onComplete:function(){c.classList.add("displayNone")}})},500),TweenMax.to(b,1,{opacity:0})},hide:function(){TweenMax.killTweensOf(this.htmlObject),TweenMax.killTweensOf(this.htmlObjectInner),w(this.htmlObject,this.htmlObjectInner),TweenMax.killTweensOf(n),TweenMax.to(n,1,{opacity:0,onComplete:function(){n.classList.add("displayNone")}}),1==Index.getIsMobile()?((d=new TimelineMax({repeatDelay:0})).to(l,1,{opacity:0}),d.to(l,0,{left:0,top:0}),d.to(l,1,{opacity:1})):TweenMax.to(l,1,{top:0,ease:Circ.easeInOut}),y=1,h.kill(),ButtonizeController.infoButtonShow(),TweenMax.killTweensOf(c),c.classList.remove("displayNone"),TweenMax.to(c,1,{opacity:1}),1===Index.getIsMobile()&&TweenMax.to(container,1,{opacity:.5,delay:0}),TweenMax.to(b,1,{opacity:1})}},{name:"refik",cameraTargetPosition:null,cameraPosition:null,htmlObject:document.querySelector("#homeSlide2"),htmlObjectInner:document.querySelector("#homeSlide2 .homeSlideInner"),homeSlideAnimObj:document.querySelectorAll("#homeSlide2 .homeSlideAnimObj"),webglObject:e[0],show:function(){this.htmlObject.classList.remove("displayNone"),T(0),o=this.webglObject,j(this.htmlObject,this.htmlObjectInner)},hide:function(){TweenMax.killTweensOf(this.htmlObject),TweenMax.killTweensOf(this.htmlObjectInner),w(this.htmlObject,this.htmlObjectInner),g(this.webglObject)}},{name:"atolye",cameraTargetPosition:null,cameraPosition:null,htmlObject:document.querySelector("#homeSlideAtolye"),htmlObjectInner:document.querySelector("#homeSlideAtolye .homeSlideInner"),homeSlideAnimObj:document.querySelectorAll("#homeSlideAtolye .homeSlideAnimObj"),webglObject:e[1],show:function(){this.htmlObject.classList.remove("displayNone"),T(1),o=this.webglObject,j(this.htmlObject,this.htmlObjectInner)},hide:function(){w(this.htmlObject,this.htmlObjectInner),g(this.webglObject)}},{name:"salon",cameraTargetPosition:null,cameraPosition:null,htmlObject:document.querySelector("#homeSlideSalon"),htmlObjectInner:document.querySelector("#homeSlideSalon .homeSlideInner"),homeSlideAnimObj:document.querySelectorAll("#homeSlideSalon .homeSlideAnimObj"),webglObject:e[2],show:function(){this.htmlObject.classList.remove("displayNone"),T(2),o=this.webglObject,j(this.htmlObject,this.htmlObjectInner)},hide:function(){w(this.htmlObject,this.htmlObjectInner),g(this.webglObject)}},{name:"kraken",cameraTargetPosition:null,cameraPosition:null,htmlObject:document.querySelector("#homeSlideKraken"),htmlObjectInner:document.querySelector("#homeSlideKraken .homeSlideInner"),homeSlideAnimObj:document.querySelectorAll("#homeSlideKraken .homeSlideAnimObj"),webglObject:e[3],show:function(){this.htmlObject.classList.remove("displayNone"),T(3),o=this.webglObject,j(this.htmlObject,this.htmlObjectInner)},hide:function(){w(this.htmlObject,this.htmlObjectInner),g(this.webglObject)}},{name:"day",cameraTargetPosition:null,cameraPosition:null,htmlObject:document.querySelector("#homeSlide4"),htmlObjectInner:document.querySelector("#homeSlide4 .homeSlideInner"),homeSlideAnimObj:document.querySelectorAll("#homeSlide4 .homeSlideAnimObj"),webglObject:e[4],show:function(){this.htmlObject.classList.remove("displayNone"),T(4),o=this.webglObject,j(this.htmlObject,this.htmlObjectInner)},hide:function(){w(this.htmlObject,this.htmlObjectInner),g(this.webglObject)}},{name:"end",cameraTargetPosition:null,cameraPosition:null,htmlObject:document.querySelector("#homeSlideEnd"),htmlObjectInner:document.querySelector("#homeSlideEnd .homeSlideInner"),homeSlideAnimObj:document.querySelectorAll("#homeSlideEnd .homeSlideAnimObj"),webglObject:e[4],show:function(){this.htmlObject.classList.remove("displayNone"),o=this.webglObject,j(this.htmlObject,this.htmlObjectInner);let t=cameraController.getCameraVectors();t.cameraTargetX=0,t.cameraTargetY=e[4].position.y-1.5,t.lookatTargetY=e[4].position.y-1.5,t.lookatTargetX=0,S=0,TweenMax.killTweensOf(this.homeSlideEndSeperatorDesktop),TweenMax.killTweensOf(this.homeSlideEndSeperatorMobile),TweenMax.to(m,2.5,{opacity:.15,height:180,delay:1}),TweenMax.to(s,1.5,{opacity:.15,width:100,delay:1,rotation:-5}),TweenMax.to(b,1,{opacity:0})},hide:function(){w(this.htmlObject,this.htmlObjectInner),mousemoveController.setSize(1),devicemotionController.setSize(1),TweenMax.killTweensOf(this.homeSlideEndSeperatorDesktop),TweenMax.killTweensOf(this.homeSlideEndSeperatorMobile),TweenMax.to(m,.5,{opacity:1,height:0,delay:0,force3D:!0}),TweenMax.to(s,.5,{opacity:1,width:0,delay:0,rotation:0}),TweenMax.to(b,1,{opacity:1})}}]},up:function(){},down:function(){},runFirstSlide:function(){u=lightController.getFirefly(),b=lightController.getFireflyMaterial(),o=e[0],r=(Index.getWW()-i-0)/2,Index.getIsMobile(),setTimeout(()=>{t[0].show()},1e3)},getSliderData:function(){return t},getCurrentPlane:function(){return o},setCurrentPlane:function(e){o=e},getlastLookatTargetX:function(){return S},updateLogoPosition:function(){0==y?TweenMax.to(l,1,{left:p(),top:f(),ease:Circ.easeInOut}):TweenMax.to(l,1,{left:p(),ease:Circ.easeInOut})}}}();